=== EXPORT PART 8/10 ===

=== –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –° –ü–†–ï–î–´–î–£–©–ï–ì–û –§–ê–ô–õ–ê ===

    'ticker': 'üéØ Ticker',
    'direction_long': 'üìà Long',
    'direction_short': 'üìâ Short',
    'operation_exit': 'üö™ Exit',
    'trading_keyword': 'üîë Keyword',
    'author': 'üë§ Author',
    'price_target': 'üéØ Target',
    'price_stop': 'üõë Stop',
    'price_take': 'üí∞ Take',
    'garbage': 'üóëÔ∏è Garbage'
  }
  return labels[category] || category
}

function getCategoryColor(category) {
  const colors = {
    'ticker': 'bg-blue-600 text-white',
    'direction_long': 'bg-green-600 text-white',
    'direction_short': 'bg-red-600 text-white',
    'operation_exit': 'bg-purple-600 text-white',
    'trading_keyword': 'bg-yellow-600 text-white',
    'author': 'bg-pink-600 text-white',
    'price_target': 'bg-cyan-600 text-white',
    'price_stop': 'bg-orange-600 text-white',
    'price_take': 'bg-emerald-600 text-white',
    'garbage': 'bg-gray-600 text-white'
  }
  return colors[category] || 'bg-gray-600 text-white'
}

function formatDate(dateString) {
  if (!dateString) return ''
  return new Date(dateString).toLocaleString('ru-RU')
}

// Lifecycle
onMounted(() => {
  loadPatterns()
})
</script>

<style scoped>
input[type="range"] {
  @apply accent-trading-green;
}
</style>

================================================================================
File: frontend/src/views/SignalsChart.vue
================================================================================
<template>
  <div class="min-h-screen bg-trading-bg text-white">
    <div class="max-w-7xl mx-auto p-4">
      
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
      <div class="mb-6 fade-in">
        <h1 class="text-3xl font-bold mb-2">üìà –ì—Ä–∞—Ñ–∏–∫ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤</h1>
        <p class="text-gray-400">–ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Å–≤–µ—á–µ–π</p>
      </div>

      <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã -->
      <div class="mb-6 slide-up">
        <div class="bg-trading-card rounded-lg border border-trading-border p-4 hover:border-trading-green/30 transition-colors duration-300">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            
            <!-- –ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ä–∞ -->
            <div class="control-group">
              <label class="control-label">–¢–∏–∫–µ—Ä</label>
              <div class="relative">
                <input
                  v-model="tickerSearch"
                  @input="filterTickers"
                  @focus="showTickerDropdown = true"
                  @blur="hideTickerDropdown"
                  :placeholder="selectedTicker || '–ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ä–∞...'"
                  class="ticker-search-input"
                  :disabled="isLoading || isLoadingSignals"
                />
                
                <!-- Dropdown —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–∏–∫–µ—Ä–æ–≤ -->
                <div 
                  v-if="showTickerDropdown && filteredTickers.length > 0" 
                  class="ticker-dropdown"
                >
                  <div
                    v-for="ticker in filteredTickers.slice(0, 10)"
                    :key="ticker.ticker"
                    @mousedown="selectTicker(ticker.ticker)"
                    class="ticker-option"
                  >
                    <span class="font-medium">{{ ticker.ticker }}</span>
                    <span class="text-sm text-gray-400">({{ ticker.signal_count || 0 }})</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- –ü–µ—Ä–∏–æ–¥ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ -->
            <div class="control-group">
              <label class="control-label">–ü–µ—Ä–∏–æ–¥ –≥—Ä–∞—Ñ–∏–∫–∞</label>
              <select 
                v-model="chartDays"
                @change="handleDaysChange"
                class="period-select smooth-transition"
                :disabled="isLoading"
              >
                <option value="7">7 –¥–Ω–µ–π</option>
                <option value="30">30 –¥–Ω–µ–π</option>
                <option value="90">90 –¥–Ω–µ–π</option>
                <option value="180">180 –¥–Ω–µ–π</option>
              </select>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
            <div class="control-group">
              <label class="control-label">&nbsp;</label>
              <button 
                @click="handleRefresh"
                :disabled="isLoading || isLoadingSignals"
                class="refresh-button"
              >
                <span v-if="isLoading || isLoadingSignals" class="inline-flex items-center">
                  <svg class="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  –ó–∞–≥—Ä—É–∑–∫–∞...
                </span>
                <span v-else>üîÑ –û–±–Ω–æ–≤–∏—Ç—å</span>
              </button>
            </div>
          </div>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤ -->
        <div v-if="selectedTicker" class="bg-trading-card rounded-lg border border-trading-border p-4 mt-4 slide-up-delayed">
          <h3 class="text-lg font-semibold mb-3">üîç –§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤</h3>
          <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
            
            <!-- –ü–µ—Ä–∏–æ–¥ —Å–∏–≥–Ω–∞–ª–æ–≤ -->
            <div class="control-group">
              <label class="control-label">–ü–µ—Ä–∏–æ–¥ —Å–∏–≥–Ω–∞–ª–æ–≤</label>
              <select 
                v-model="signalsDays"
                @change="loadSignalsForTicker"
                class="filter-select smooth-transition"
                :disabled="isLoadingSignals"
              >
                <option value="7">7 –¥–Ω–µ–π</option>
                <option value="30">30 –¥–Ω–µ–π</option>
                <option value="90">90 –¥–Ω–µ–π</option>
                <option value="180">180 –¥–Ω–µ–π</option>
              </select>
            </div>

            <!-- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="control-group">
              <label class="control-label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
              <select v-model="signalsFilters.direction" @change="applySignalsFilters" class="filter-select smooth-transition">
                <option value="all">–í—Å–µ</option>
                <option value="long">Long</option>
                <option value="short">Short</option>
                <option value="exit">Exit</option>
              </select>
            </div>

            <!-- –ê–≤—Ç–æ—Ä -->
            <div class="control-group">
              <label class="control-label">–ê–≤—Ç–æ—Ä</label>
              <select v-model="signalsFilters.author" @change="applySignalsFilters" class="filter-select smooth-transition">
                <option value="">–í—Å–µ –∞–≤—Ç–æ—Ä—ã</option>
                <option v-for="author in availableAuthors" :key="author" :value="author">
                  {{ author }}
                </option>
              </select>
            </div>

            <!-- –ü–µ—Ä–∏–æ–¥ —Ñ–∏–ª—å—Ç—Ä–∞ -->
            <div class="control-group">
              <label class="control-label">–ü–µ—Ä–∏–æ–¥</label>
              <select v-model="signalsFilters.period" @change="applySignalsFilters" class="filter-select smooth-transition">
                <option value="">–í–µ—Å—å –ø–µ—Ä–∏–æ–¥</option>
                <option value="1d">–ó–∞ –¥–µ–Ω—å</option>
                <option value="3d">–ó–∞ 3 –¥–Ω—è</option>
                <option value="7d">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                <option value="30d">–ó–∞ –º–µ—Å—è—Ü</option>
              </select>
            </div>

            <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
            <div class="control-group">
              <label class="control-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
              <select v-model="signalsFilters.order_by" @change="applySignalsFilters" class="filter-select smooth-transition">
                <option value="timestamp">–ü–æ –≤—Ä–µ–º–µ–Ω–∏</option>
                <option value="ticker">–ü–æ —Ç–∏–∫–µ—Ä—É</option>
                <option value="author">–ü–æ –∞–≤—Ç–æ—Ä—É</option>
              </select>
            </div>
          </div>

          <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
          <div class="mt-3 flex items-center justify-between text-sm text-gray-400 counter-animation">
            <div>
              –ù–∞–π–¥–µ–Ω–æ: <span class="text-white font-medium">{{ filteredSignals.length }}</span> –∏–∑ {{ allSignals.length }} —Å–∏–≥–Ω–∞–ª–æ–≤
            </div>
            <div class="flex gap-4">
              <span class="signal-counter text-trading-green">Long: {{ longSignalsCount }}</span>
              <span class="signal-counter text-trading-red">Short: {{ shortSignalsCount }}</span>
              <span class="signal-counter text-purple-400">Exit: {{ exitSignalsCount }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div v-if="selectedTicker" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 slide-up">
        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-2xl font-bold text-white">{{ selectedTicker }}</div>
              <div class="text-sm text-gray-400">–¢–∏–∫–µ—Ä</div>
            </div>
            <div class="text-3xl">üéØ</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-2xl font-bold text-trading-green counter-up">{{ allSignals.length }}</div>
              <div class="text-sm text-gray-400">–°–∏–≥–Ω–∞–ª–æ–≤</div>
            </div>
            <div class="text-3xl">üìä</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-2xl font-bold text-trading-yellow">{{ chartDays }}</div>
              <div class="text-sm text-gray-400">–î–Ω–µ–π –≥—Ä–∞—Ñ–∏–∫–∞</div>
            </div>
            <div class="text-3xl">üìÖ</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-2xl font-bold" :class="priceChangeColor">
                {{ priceChange ? (priceChange > 0 ? '+' : '') + priceChange.toFixed(2) + '%' : '‚Äî' }}
              </div>
              <div class="text-sm text-gray-400">–ò–∑–º–µ–Ω–µ–Ω–∏–µ</div>
            </div>
            <div class="text-3xl">üìà</div>
          </div>
        </div>
      </div>

      <!-- –û—à–∏–±–∫–∏ -->
      <div v-if="anyError" class="mb-6 slide-up">
        <div class="error-message">
          ‚ùå {{ anyError }}
          <button 
            @click="clearErrors" 
            class="ml-4 underline hover:no-underline transition-colors"
          >
            –°–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>

      <!-- –ì—Ä–∞—Ñ–∏–∫ -->
      <div class="mb-6 slide-up">
        <div class="chart-container">
          <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä–∞—Ñ–∏–∫–∞ -->
          <div class="px-4 py-3 border-b border-trading-border">
            <div class="flex items-center justify-between">
              <h2 class="text-xl font-semibold">
                üìä {{ selectedTicker || '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–∫–µ—Ä' }}
                <span v-if="selectedTicker" class="text-sm text-gray-400 ml-2">
                  ({{ chartDays }} –¥–Ω. / {{ signalsDays }} –¥–Ω. —Å–∏–≥–Ω–∞–ª–æ–≤)
                </span>
              </h2>
              
              <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ -->
              <div class="flex items-center space-x-2">
                <button 
                  @click="toggleSignalsOnChart"
                  :class="showSignalsOnChart ? 'bg-trading-green text-black' : 'bg-gray-600 text-white'"
                  class="px-3 py-1 text-sm rounded transition-all duration-300 hover:scale-105"
                >
                  {{ showSignalsOnChart ? 'üëÅÔ∏è –°–∫—Ä—ã—Ç—å —Å–∏–≥–Ω–∞–ª—ã' : 'üëÅÔ∏è‚Äçüó®Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã' }}
                </button>
              </div>
            </div>
          </div>

          <!-- –ì—Ä–∞—Ñ–∏–∫ -->
          <div class="p-4">
            <UnifiedTradingChart
              :ticker="selectedTicker"
              :candles-data="candlesData"
              :signals-data="showSignalsOnChart ? filteredSignals : []"
              :show-signals="showSignalsOnChart"
              :current-price="currentPrice"
              :is-loading="isLoading"
              :candles-error="candlesError"
              :signals-error="signalsError"
              :chart-height="400"
              @retry="handleRefresh"
              class="rounded-lg"
            />
          </div>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –ü–û–î –≥—Ä–∞—Ñ–∏–∫–æ–º -->
      <div class="signals-list-container slide-up">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ -->
        <div class="px-4 py-3 border-b border-trading-border">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold">
              üîç –°–∏–≥–Ω–∞–ª—ã{{ selectedTicker ? ` –¥–ª—è ${selectedTicker}` : '' }}
            </h3>
            <div class="text-sm text-gray-400">
              {{ filteredSignals.length > 0 ? `–ü–æ–∫–∞–∑–∞–Ω–æ ${filteredSignals.length} —Å–∏–≥–Ω–∞–ª–æ–≤` : '–ù–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤' }}
            </div>
          </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ -->
        <div class="max-h-96 overflow-y-auto">
          <!-- –°–∫–µ–ª–µ—Ç–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
          <div v-if="isLoadingSignals" class="p-8">
            <div class="space-y-4 animate-pulse">
              <div class="flex items-center space-x-4">
                <div class="h-10 bg-gray-700 rounded-full w-10"></div>
                <div class="flex-1 space-y-2">
                  <div class="h-4 bg-gray-700 rounded w-3/4"></div>
                  <div class="h-3 bg-gray-700 rounded w-1/2"></div>
                </div>
              </div>
              <div class="flex items-center space-x-4">
                <div class="h-10 bg-gray-700 rounded-full w-10"></div>
                <div class="flex-1 space-y-2">
                  <div class="h-4 bg-gray-700 rounded w-2/3"></div>
                  <div class="h-3 bg-gray-700 rounded w-1/3"></div>
                </div>
              </div>
              <div class="flex items-center space-x-4">
                <div class="h-10 bg-gray-700 rounded-full w-10"></div>
                <div class="flex-1 space-y-2">
                  <div class="h-4 bg-gray-700 rounded w-4/5"></div>
                  <div class="h-3 bg-gray-700 rounded w-2/5"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- –û—à–∏–±–∫–∞ -->
          <div v-else-if="signalsError" class="p-8 text-center">
            <div class="text-6xl mb-4">‚ùå</div>
            <h3 class="text-lg font-semibold mb-2">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
            <p class="text-gray-400 mb-4">{{ signalsError }}</p>
            <button 
              @click="loadSignalsForTicker"
              class="px-4 py-2 bg-trading-green hover:bg-green-600 text-black rounded-md transition-all duration-300 hover:scale-105"
            >
              üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
            </button>
          </div>

          <!-- –°–ø–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ -->
          <div v-else-if="filteredSignals.length > 0" class="p-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div 
                v-for="(signal, index) in paginatedSignals" 
                :key="signal.id"
                @click="onSignalClick(signal)"
                class="cursor-pointer signal-card-wrapper"
                :style="{ animationDelay: `${index * 50}ms` }"
              >
                <SignalCard 
                  :signal="signal"
                  :show-details="true"
                />
              </div>
            </div>
            
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div v-if="totalSignalsPages > 1" class="flex justify-center gap-2 mt-6">
              <button 
                @click="prevSignalsPage"
                :disabled="currentSignalsPage === 1"
                class="px-4 py-2 bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed rounded transition-colors"
              >
                ‚Üê –ù–∞–∑–∞–¥
              </button>
              <span class="px-4 py-2 text-gray-400">
                {{ currentSignalsPage }} / {{ totalSignalsPages }}
              </span>
              <button 
                @click="nextSignalsPage"
                :disabled="currentSignalsPage === totalSignalsPages"
                class="px-4 py-2 bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed rounded transition-colors"
              >
                –í–ø–µ—Ä—ë–¥ ‚Üí
              </button>
            </div>
          </div>
          <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
          <div v-else class="p-8 text-center">
            <div class="text-6xl mb-4">üéØ</div>
            <h3 class="text-lg font-semibold mb-2">–°–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
            <p class="text-gray-400 mb-4">
              {{ selectedTicker ? 
                `–î–ª—è —Ç–∏–∫–µ—Ä–∞ ${selectedTicker} –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–ª–∏ –æ–Ω–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–ª—å—Ç—Ä–∞–º` : 
                '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–∫–µ—Ä –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–∏–≥–Ω–∞–ª–æ–≤' 
              }}
            </p>
            <button 
              v-if="selectedTicker"
              @click="resetSignalsFilters"
              class="px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded transition-all duration-300 hover:scale-105"
            >
              üîÑ –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { useTradingStore } from '../stores/tradingStore.js'
import { tradingAPI } from '../services/api'
import UnifiedTradingChart from '../components/charts/UnifiedTradingChart.vue'
import SignalCard from '../components/SignalCard.vue'

// Router
const route = useRoute()
const router = useRouter()

// Store
const store = useTradingStore()

const selectedTicker = computed({
  get: () => store.selectedTicker,
  set: (value) => store.selectedTicker = value
})

const chartDays = computed({
  get: () => store.chartDays,
  set: (value) => store.chartDays = value
})

const formattedCandles = computed(() => {
  const formatted = store.formattedCandles || []
  console.log('üìä SignalsChart: Using formattedCandles:', formatted.slice(0, 2))
  return formatted
})
const candlesData = computed(() => store.candlesData || [])
const availableTickers = computed(() => store.availableTickers || [])
const currentPrice = computed(() => store.currentPrice)
const isLoading = computed(() => store.isLoading)
const candlesError = computed(() => store.candlesError)
const anyError = computed(() => {
  return store.candlesError || store.tickersError || signalsError.value
})

const priceChange = computed(() => {
  if (!formattedCandles.value || formattedCandles.value.length < 2) return null
  
  const firstPrice = formattedCandles.value[0].open
  const lastPrice = formattedCandles.value[formattedCandles.value.length - 1].close
  
  return ((lastPrice - firstPrice) / firstPrice) * 100
})

const priceChangeColor = computed(() => {
  if (!priceChange.value) return 'text-gray-400'
  return priceChange.value > 0 ? 'text-trading-green' : 'text-trading-red'
})

// –ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ä–æ–≤
const tickerSearch = ref('')
const showTickerDropdown = ref(false)
const filteredTickers = ref([])

function filterTickers() {
  if (!tickerSearch.value.trim()) {
    filteredTickers.value = availableTickers.value
  } else {
    const searchTerm = tickerSearch.value.toLowerCase()
    filteredTickers.value = availableTickers.value.filter(ticker => 
      ticker.ticker.toLowerCase().includes(searchTerm)
    )
  }
}

function selectTicker(ticker) {
  selectedTicker.value = ticker
  tickerSearch.value = ''
  showTickerDropdown.value = false
  handleTickerChange()
}

function hideTickerDropdown() {
  setTimeout(() => {
    showTickerDropdown.value = false
  }, 200)
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Ç–∏–∫–µ—Ä–æ–≤
watch(() => availableTickers.value, () => {
  filteredTickers.value = availableTickers.value
}, { immediate: true })

// –°–∏–≥–Ω–∞–ª—ã - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
const signalsDays = ref(30)
const showSignalsOnChart = ref(true)
const allSignals = ref([])
const isLoadingSignals = ref(false)
const signalsError = ref(null)
const availableAuthors = ref([])

// –§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤
const signalsFilters = ref({
  direction: 'all',
  author: '',
  period: '',
  order_by: 'timestamp'
})

const currentSignalsPage = ref(1)
const signalsPerPage = ref(20)
const filteredSignals = computed(() => {
  let filtered = [...allSignals.value]

  if (signalsFilters.value.direction !== 'all') {
    filtered = filtered.filter(signal => {
      const direction = signal.direction?.toLowerCase()
      return direction === signalsFilters.value.direction || 
             (signalsFilters.value.direction === 'long' && (direction === 'buy' || direction === 'long')) ||
             (signalsFilters.value.direction === 'short' && (direction === 'sell' || direction === 'short'))
    })
  }

  if (signalsFilters.value.author) {
    filtered = filtered.filter(signal => signal.author === signalsFilters.value.author)
  }

  if (signalsFilters.value.period) {
    const now = new Date()
    const periodMs = {
      '1d': 24 * 60 * 60 * 1000,
      '3d': 3 * 24 * 60 * 60 * 1000,
      '7d': 7 * 24 * 60 * 60 * 1000,
      '30d': 30 * 24 * 60 * 60 * 1000
    }[signalsFilters.value.period]

    if (periodMs) {
      const cutoff = new Date(now.getTime() - periodMs)
      filtered = filtered.filter(signal => {
        const signalDate = new Date(signal.timestamp || signal.datetime)
        return signalDate >= cutoff
      })
    }
  }

  filtered.sort((a, b) => {
    const field = signalsFilters.value.order_by
    if (field === 'timestamp') {
      return new Date(b.timestamp || b.datetime) - new Date(a.timestamp || a.timestamp)
    } else if (field === 'ticker') {
      return (a.ticker || '').localeCompare(b.ticker || '')
    } else if (field === 'author') {
      return (a.author || '').localeCompare(b.author || '')
    }
    return 0
  })

  return filtered
})

const totalSignalsPages = computed(() => Math.ceil(filteredSignals.value.length / signalsPerPage.value))
const paginatedSignals = computed(() => {
  const start = (currentSignalsPage.value - 1) * signalsPerPage.value
  const end = start + signalsPerPage.value
  return filteredSignals.value.slice(start, end)
})

const longSignalsCount = computed(() => 
  filteredSignals.value.filter(s => {
    const dir = s.direction?.toLowerCase()
    return dir === 'long' || dir === 'buy'
  }).length
)

const shortSignalsCount = computed(() => 
  filteredSignals.value.filter(s => {
    const dir = s.direction?.toLowerCase()
    return dir === 'short' || dir === 'sell'
  }).length
)

const exitSignalsCount = computed(() => 
  filteredSignals.value.filter(s => {
    const dir = s.direction?.toLowerCase()
    return dir === 'exit' || dir === 'close'
  }).length
)

async function handleTickerChange() {
  if (selectedTicker.value) {
    console.log('üîÑ Changing ticker to:', selectedTicker.value)
    
    resetSignalsFilters()
    
    await store.setTicker(selectedTicker.value)
    
    await loadSignalsForTicker()
    
    if (route.params.ticker !== selectedTicker.value) {
      await router.replace(`/signals-chart/${selectedTicker.value}`)
    }
  }
}

async function handleDaysChange() {
  if (selectedTicker.value) {
    console.log('üìÖ Changing days to:', chartDays.value)
    store.setChartDays(chartDays.value)
    await store.loadCandles(selectedTicker.value, chartDays.value)
  }
}

async function handleRefresh() {
  console.log('üîÑ Force refresh')
  await Promise.all([
    store.forceReloadData(),
    loadSignalsForTicker()
  ])
}

function clearErrors() {
  signalsError.value = null
  store.clearErrors()
}

// –ú–µ—Ç–æ–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
async function loadSignalsForTicker() {
  if (!selectedTicker.value) {
    allSignals.value = []
    availableAuthors.value = []
    return
  }

  isLoadingSignals.value = true
  signalsError.value = null

  try {
    console.log('üéØ Loading signals for ticker:', selectedTicker.value)

    const response = await tradingAPI.getSignals({
      ticker: selectedTicker.value,
      days_back: signalsDays.value,
      limit: 500,
      include_stats: true
    })

    allSignals.value = response.signals || []
    
    // –°–æ–±–∏—Ä–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤
    const authors = new Set()
    allSignals.value.forEach(signal => {
      if (signal.author) {
        authors.add(signal.author)
      }
    })
    availableAuthors.value = Array.from(authors).sort()

    console.log('‚úÖ Loaded signals:', allSignals.value.length)

  } catch (error) {
    console.error('‚ùå Error loading signals:', error)
    signalsError.value = error.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤'
    allSignals.value = []
    availableAuthors.value = []
  } finally {
    isLoadingSignals.value = false
  }
}

function applySignalsFilters() {
  console.log('üîç Applying signals filters:', signalsFilters.value)
  currentSignalsPage.value = 1
}

function resetSignalsFilters() {
  console.log('üóëÔ∏è Resetting signals filters')
  signalsFilters.value = {
    direction: 'all',
    author: '',
    period: '',
    order_by: 'timestamp'
  }
  currentSignalsPage.value = 1
}

function toggleSignalsOnChart() {
  showSignalsOnChart.value = !showSignalsOnChart.value
  console.log('üëÅÔ∏è Toggled signals on chart:', showSignalsOnChart.value)
}

// –ü–∞–≥–∏–Ω–∞—Ü–∏—è
function nextSignalsPage() {
  if (currentSignalsPage.value < totalSignalsPages.value) {
    currentSignalsPage.value++
  }
}

function prevSignalsPage() {
  if (currentSignalsPage.value > 1) {
    currentSignalsPage.value--
  }
}

function onSignalClick(signal) {
  console.log('üéØ Signal clicked:', signal)
}

// Lifecycle - –∫–∞–∫ –≤ CleanChart
onMounted(async () => {
  console.log('üìä SignalsChart mounted, route params:', route.params)
  
  try {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–∫–µ—Ä –∏–∑ URL
    const routeTicker = route.params.ticker?.toUpperCase()
    
    if (routeTicker) {
      console.log('üéØ Setting ticker from URL:', routeTicker)
      store.selectedTicker = routeTicker
    }
    
    await store.initialize()
    if (routeTicker && routeTicker !== store.selectedTicker) {
      await store.setTicker(routeTicker)
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∏–≥–Ω–∞–ª—ã –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–∏–∫–µ—Ä
    if (store.selectedTicker) {
      await loadSignalsForTicker()
    }
    
  } catch (error) {
    console.error('‚ùå Error initializing SignalsChart:', error)
  }
})

// Watchers - –∫–∞–∫ –≤ CleanChart
watch(() => route.params.ticker, async (newTicker) => {
  if (newTicker && newTicker.toUpperCase() !== selectedTicker.value) {
    selectedTicker.value = newTicker.toUpperCase()
    await handleTickerChange()
  }
})

watch(() => signalsFilters.value, () => {
  currentSignalsPage.value = 1
}, { deep: true })

watch(() => signalsDays.value, (newDays) => {
  if (selectedTicker.value && newDays) {
    console.log('üìÖ Signals days changed to:', newDays)
    loadSignalsForTicker()
  }
})
</script>

<style scoped>
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0; 
    transform: translateY(20px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes slideInSignal {
  from { 
    opacity: 0; 
    transform: translateX(-20px); 
  }
  to { 
    opacity: 1; 
    transform: translateX(0); 
  }
}

/* –ö–ª–∞—Å—Å—ã –∞–Ω–∏–º–∞—Ü–∏–∏ */
.fade-in {
  animation: fadeIn 0.6s ease-out;
}

.slide-up {
  animation: slideUp 0.6s ease-out;
}

.slide-up-delayed {
  animation: slideUp 0.6s ease-out 0.2s both;
}

.signal-item {
  animation: slideInSignal 0.3s ease-out both;
}

.counter-animation {
  animation: fadeIn 0.8s ease-out;
}

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
.control-group {
  @apply space-y-2;
}

.control-label {
  @apply block text-sm font-medium text-gray-300;
}

.smooth-transition {
  @apply transition-all duration-300;
}

/* –ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ä–æ–≤ */
.ticker-search-input {
  @apply w-full px-3 py-2 bg-trading-bg border border-trading-border rounded;
  @apply text-white focus:ring-2 focus:ring-trading-green focus:border-trading-green;
  @apply transition-all duration-300;
}

.ticker-dropdown {
  @apply absolute top-full left-0 right-0 z-50 bg-trading-card border border-trading-border rounded-md mt-1;
  @apply max-h-64 overflow-y-auto shadow-lg;
}

.ticker-option {
  @apply px-3 py-2 hover:bg-trading-green hover:text-black cursor-pointer transition-colors duration-200;
  @apply flex items-center justify-between;
}

/* –°–µ–ª–µ–∫—Ç—ã */
.period-select,
.filter-select {
  @apply w-full px-3 py-2 bg-trading-bg border border-trading-border rounded;
  @apply text-white focus:ring-2 focus:ring-trading-green focus:border-trading-green;
  @apply transition-all duration-300 hover:border-trading-green/50;
}

/* –ö–Ω–æ–ø–∫–∏ */
.refresh-button {
  @apply w-full px-3 py-2 bg-trading-green hover:bg-green-600 text-black rounded;
  @apply font-medium transition-all duration-300 hover:scale-105;
  @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100;
}

.pagination-button {
  @apply px-3 py-1 text-sm bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed;
  @apply rounded transition-all duration-300 hover:scale-105 disabled:hover:scale-100;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
.stat-card {
  @apply bg-trading-card rounded-lg border border-trading-border p-4;
  @apply hover:border-trading-green/30 transition-all duration-300 hover:scale-105;
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
.chart-container {
  @apply bg-trading-card rounded-lg border border-trading-border overflow-hidden;
  @apply hover:border-trading-green/30 transition-colors duration-300;
}

.signals-list-container {
  @apply bg-trading-card rounded-lg border border-trading-border;
  @apply hover:border-trading-green/30 transition-colors duration-300;
}

.signal-card-wrapper {
  animation: slideIn 0.4s ease-out;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö */
.error-message {
  @apply bg-red-900/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg;
  @apply transition-all duration-300;
}

/* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤ */
.signal-item {
  @apply p-4 hover:bg-trading-bg cursor-pointer transition-all duration-300;
  @apply border-l-4 border-transparent hover:border-trading-green;
  @apply hover:transform hover:scale-[1.02];
}

/* –°—á–µ—Ç—á–∏–∫–∏ */
.signal-counter {
  @apply transition-all duration-300 hover:scale-110;
}

.counter-up {
  animation: fadeIn 0.8s ease-out;
}

/* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
.overflow-y-auto::-webkit-scrollbar {
  width: 6px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: #1a1a1a;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #404040;
  border-radius: 3px;
  transition: background-color 0.3s;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: #00d4aa;
}

/* –û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å */
@media (max-width: 768px) {
  .stat-card {
    @apply hover:scale-100;
  }
  
  .signal-item {
    @apply hover:scale-100;
  }
}
</style>

================================================================================
File: frontend/src/views/TraderProfile.vue
================================================================================
<template>
  <div class="min-h-screen bg-trading-bg text-white p-4">
    <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤ -->
    <div v-if="!currentTraderId">
      <div class="mb-6">
        <h1 class="text-2xl font-bold">üë• –í—Å–µ —Ç—Ä–µ–π–¥–µ—Ä—ã</h1>
        <p class="text-gray-400">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–π–¥–µ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è</p>
      </div>

      <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ -->
      <div v-if="isLoadingList" class="flex items-center justify-center h-64">
        <div class="text-center">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-trading-green mx-auto mb-4"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤...</p>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤ -->
      <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div 
          v-for="trader in tradersList" 
          :key="trader.id"
          @click="$router.push(`/trader/${trader.id}`)"
          class="bg-trading-card rounded-lg border border-trading-border p-4 cursor-pointer hover:border-trading-green transition-colors"
        >
          <div class="flex items-center justify-between mb-3">
            <h3 class="font-semibold">{{ trader.name }}</h3>
            <div :class="trader.is_active ? 'text-trading-green' : 'text-gray-400'" class="text-sm">
              {{ trader.is_active ? 'üü¢ –ê–∫—Ç–∏–≤–µ–Ω' : '‚ö™ –ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
            </div>
          </div>
          
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-400">–°–∏–≥–Ω–∞–ª–æ–≤:</span>
              <span>{{ trader.total_signals || 0 }}</span>
            </div>
            <div v-if="trader.win_rate" class="flex justify-between">
              <span class="text-gray-400">Win Rate:</span>
              <span class="text-trading-green">{{ trader.win_rate }}%</span>
            </div>
            <div v-if="trader.avg_profit_pct" class="flex justify-between">
              <span class="text-gray-400">–°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å:</span>
              <span :class="trader.avg_profit_pct > 0 ? 'text-trading-green' : 'text-trading-red'">
                {{ trader.avg_profit_pct > 0 ? '+' : '' }}{{ trader.avg_profit_pct }}%
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç—Ä–µ–π–¥–µ—Ä–∞ -->
    <div v-else>
      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥ -->
      <div class="mb-6">
        <button 
          @click="$router.push('/traders')"
          class="flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-4"
        >
          ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Ç—Ä–µ–π–¥–µ—Ä–æ–≤
        </button>
        
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–º–µ–Ω–µ–º —Ç—Ä–µ–π–¥–µ—Ä–∞ -->
        <div v-if="traderStats">
          <h1 class="text-2xl font-bold">üë§ {{ traderStats.trader_name || '–¢—Ä–µ–π–¥–µ—Ä' }}</h1>
          <div class="flex items-center gap-4 text-gray-400 mt-2">
            <span>ID: {{ traderStats.trader_id }}</span>
          </div>
        </div>
        <div v-else-if="!isLoading">
          <h1 class="text-2xl font-bold text-gray-400">üë§ –¢—Ä–µ–π–¥–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω</h1>
        </div>
      </div>

      <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
      <div v-if="isLoading" class="flex items-center justify-center h-64">
        <div class="text-center">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-trading-green mx-auto mb-4"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
      </div>

      <!-- –û—à–∏–±–∫–∞ -->
      <div v-else-if="error" class="bg-red-900/20 border border-red-500 rounded-lg p-4 text-center">
        <p class="text-red-400">{{ error }}</p>
        <button 
          @click="loadTraderData"
          class="mt-4 px-4 py-2 bg-trading-green hover:bg-green-600 text-black rounded-md transition-colors"
        >
          üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
        </button>
      </div>

      <!-- –î–∞–Ω–Ω—ã–µ —Ç—Ä–µ–π–¥–µ—Ä–∞ -->
      <div v-else-if="traderStats" class="space-y-6">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="bg-trading-card rounded-lg border border-trading-border p-4">
            <div class="text-gray-400 text-sm mb-1">–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤</div>
            <div class="text-2xl font-bold">{{ traderStats.total_signals || 0 }}</div>
          </div>
          
          <div class="bg-trading-card rounded-lg border border-trading-border p-4">
            <div class="text-gray-400 text-sm mb-1">–ó–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫</div>
            <div class="text-2xl font-bold">{{ traderStats.closed_results || 0 }}</div>
          </div>
          
          <div class="bg-trading-card rounded-lg border border-trading-border p-4">
            <div class="text-gray-400 text-sm mb-1">Win Rate</div>
            <div class="text-2xl font-bold text-trading-green">
              {{ traderStats.win_rate || 0 }}%
            </div>
          </div>
          
          <div class="bg-trading-card rounded-lg border border-trading-border p-4">
            <div class="text-gray-400 text-sm mb-1">–°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å</div>
            <div class="text-2xl font-bold" :class="traderStats.avg_profit_pct > 0 ? 'text-trading-green' : 'text-trading-red'">
              {{ traderStats.avg_profit_pct > 0 ? '+' : '' }}{{ traderStats.avg_profit_pct || 0 }}%
            </div>
          </div>
        </div>

        <!-- –¢–æ–ø —Ç–∏–∫–µ—Ä—ã -->
        <div v-if="traderStats.top_tickers && traderStats.top_tickers.length > 0" class="bg-trading-card rounded-lg border border-trading-border p-4">
          <h3 class="font-semibold mb-4">üìä –¢–æ–ø —Ç–∏–∫–µ—Ä—ã</h3>
          <div class="space-y-2">
            <div 
              v-for="item in traderStats.top_tickers" 
              :key="item.ticker"
              class="flex items-center justify-between p-2 bg-trading-bg rounded hover:bg-gray-800 transition-colors"
            >
              <span class="font-mono">{{ item.ticker }}</span>
              <span class="text-gray-400">{{ item.count }} —Å–∏–≥–Ω–∞–ª–æ–≤</span>
            </div>
          </div>
        </div>

        <!-- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div v-if="traderStats.by_direction" class="bg-trading-card rounded-lg border border-trading-border p-4">
          <h3 class="font-semibold mb-4">üìà –ü–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º</h3>
          <div class="space-y-2">
            <div 
              v-for="(count, direction) in traderStats.by_direction" 
              :key="direction"
              class="flex items-center justify-between p-2 bg-trading-bg rounded"
            >
              <span class="capitalize">{{ direction }}</span>
              <span class="text-gray-400">{{ count }}</span>
            </div>
          </div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã -->
        <div class="bg-trading-card rounded-lg p-4 border border-trading-border">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">üéØ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã</h3>
            <button 
              @click="loadMoreSignals"
              class="text-trading-green hover:text-opacity-80 transition-colors text-sm"
            >
              –ü–æ–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ
            </button>
          </div>
          
          <div v-if="traderSignals.length === 0" class="text-gray-400">
            –ù–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
          </div>
          <div v-else class="p-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div 
                v-for="signal in traderSignals.slice(0, 12)" 
                :key="signal.id"
                @click="onSignalClick(signal)"
                class="cursor-pointer"
              >
                <SignalCard 
                  :signal="signal"
                  :show-details="false"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import tradingAPI from '../services/api.js'
import SignalCard from '../components/SignalCard.vue'

const route = useRoute()
const router = useRouter()

const currentTraderId = ref(route.params.id)

const isLoading = ref(false)
const isLoadingList = ref(false)
const error = ref(null)

const traderStats = ref(null)
const traderSignals = ref([])
const tradersList = ref([])

watch(() => route.params.id, (newId) => {
  console.log('üîÑ Route changed to:', newId)
  currentTraderId.value = newId
  
  if (newId) {
    traderStats.value = null
    traderSignals.value = []
    error.value = null
    loadTraderData()
  } else {
    loadTradersList()
  }
}, { immediate: false })

function formatDate(dateString) {
  return new Date(dateString).toLocaleDateString('ru-RU')
}

async function loadTradersList() {
  console.log('üìã Loading traders list...')
  isLoadingList.value = true
  try {
    const response = await tradingAPI.getTraders()
    tradersList.value = response
    console.log('‚úÖ Loaded traders:', response.length)
  } catch (err) {
    console.error('‚ùå Error loading traders list:', err)
  } finally {
    isLoadingList.value = false
  }
}

async function loadTraderData() {
  if (!currentTraderId.value) {
    console.log('‚ö†Ô∏è No trader ID provided')
    return
  }
  
  console.log('üìä Loading trader data for ID:', currentTraderId.value)
  isLoading.value = true
  error.value = null
  
  try {
    console.log('üìà Fetching trader stats...')
    const stats = await tradingAPI.getTraderStats(currentTraderId.value, 30)
    console.log('üìä Raw trader stats response:', stats)
    traderStats.value = stats
    console.log('‚úÖ Trader stats loaded:', stats)
    
    console.log('üéØ Fetching trader signals...')
    const signalsResponse = await tradingAPI.getTraderSignals(currentTraderId.value, {
      days_back: 90,
      limit: 50
    })
    
    let signalsArray = []
    if (Array.isArray(signalsResponse)) {
      signalsArray = signalsResponse
    } else if (signalsResponse && Array.isArray(signalsResponse.signals)) {
      signalsArray = signalsResponse.signals
    } else if (signalsResponse && signalsResponse.data && Array.isArray(signalsResponse.data)) {
      signalsArray = signalsResponse.data
    }
    
    traderSignals.value = signalsArray
    console.log('‚úÖ Trader signals loaded:', signalsArray.length)
    
  } catch (err) {
    console.error('‚ùå Error loading trader data:', err)
    console.error('‚ùå Error details:', err)
    error.value = `–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ${err.message}`
  } finally {
    isLoading.value = false
  }
}

async function loadMoreSignals() {
  try {
    console.log('üìà Loading more signals...')
    const signalsResponse = await tradingAPI.getTraderSignals(currentTraderId.value, {
      ticker: null,
      limit: 100
    })
    let signalsArray = []
    if (Array.isArray(signalsResponse)) {
      signalsArray = signalsResponse
    } else if (signalsResponse && Array.isArray(signalsResponse.signals)) {
      signalsArray = signalsResponse.signals
    } else if (signalsResponse && signalsResponse.data && Array.isArray(signalsResponse.data)) {
      signalsArray = signalsResponse.data
    }
    
    traderSignals.value = [...traderSignals.value, ...signalsArray]
    console.log('‚úÖ More signals loaded:', traderSignals.value.length)
  } catch (err) {
    console.error('‚ùå Error loading more signals:', err)
    error.value = `–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤: ${err.message}`
  }
}

function onSignalClick(signal) {
  console.log('üéØ Signal clicked:', signal)
}

onMounted(async () => {
  console.log('üöÄ TraderProfile mounted, route params:', route.params)
  
  if (currentTraderId.value) {
    await loadTraderData()
  } else {
    await loadTradersList()
  }
})
</script>

<style scoped>
.transition-transform {
  transition: transform 0.2s ease-in-out;
}
</style>

================================================================================
File: frontend/src/views/TradingDashboard.vue
================================================================================
<!-- frontend/src/views/TradingDashboard.vue - –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø -->
<template>
  <div class="min-h-screen bg-trading-bg text-white">
    <div class="max-w-7xl mx-auto p-4">
      
      <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold mb-2">üìä –¢–æ—Ä–≥–æ–≤—ã–π –¢–µ—Ä–º–∏–Ω–∞–ª</h1>
        <p class="text-gray-400">–ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</p>
      </div>

      <!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- –ì—Ä–∞—Ñ–∏–∫ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ -->
        <router-link 
          to="/signals-chart"
          class="bg-trading-card rounded-lg border border-trading-border p-6 hover:border-trading-green transition-colors cursor-pointer group"
        >
          <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">üìà</div>
          <h3 class="text-xl font-semibold mb-2">–ì—Ä–∞—Ñ–∏–∫ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏</h3>
          <p class="text-gray-400">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Å–≤–µ—á–µ–π</p>
        </router-link>

        <!-- –ß–∏—Å—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫ -->
        <router-link 
          to="/clean-chart"
          class="bg-trading-card rounded-lg border border-trading-border p-6 hover:border-trading-green transition-colors cursor-pointer group"
        >
          <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">üìä</div>
          <h3 class="text-xl font-semibold mb-2">–ß–∏—Å—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫</h3>
          <p class="text-gray-400">–ì—Ä–∞—Ñ–∏–∫ —Å–≤–µ—á–µ–π –±–µ–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤</p>
        </router-link>

        <!-- –¢—Ä–µ–π–¥–µ—Ä—ã -->
        <router-link 
          to="/traders"
          class="bg-trading-card rounded-lg border border-trading-border p-6 hover:border-trading-green transition-colors cursor-pointer group"
        >
          <div class="text-4xl mb-4 group-hover:scale-110 transition-transform">üë•</div>
          <h3 class="text-xl font-semibold mb-2">–¢—Ä–µ–π–¥–µ—Ä—ã</h3>
          <p class="text-gray-400">–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤ –∏ –∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤</p>
        </router-link>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="bg-trading-card rounded-lg border border-trading-border p-6">
          <div class="text-4xl mb-4">üìä</div>
          <h3 class="text-xl font-semibold mb-2">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <p class="text-gray-400">–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
        </div>
      </div>

      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø -->
        <div class="bg-trading-card rounded-lg border border-trading-border p-6">
          <h3 class="text-xl font-semibold mb-4">üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between p-3 bg-trading-bg border border-trading-border rounded">
              <div>
                <div class="font-semibold">–ì—Ä–∞—Ñ–∏–∫ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏</div>
                <div class="text-sm text-gray-400">–ê–Ω–∞–ª–∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ</div>
              </div>
              <router-link 
                to="/signals-chart" 
                class="px-3 py-1 bg-trading-green text-black rounded hover:bg-opacity-80 transition-colors text-sm"
              >
                –û—Ç–∫—Ä—ã—Ç—å
              </router-link>
            </div>
            
            <div class="flex items-center justify-between p-3 bg-trading-bg border border-trading-border rounded">
              <div>
                <div class="font-semibold">–ß–∏—Å—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫</div>
                <div class="text-sm text-gray-400">–¢–æ–ª—å–∫–æ —Å–≤–µ—á–∏ –±–µ–∑ —Å–∏–≥–Ω–∞–ª–æ–≤</div>
              </div>
              <router-link 
                to="/clean-chart" 
                class="px-3 py-1 bg-trading-green text-black rounded hover:bg-opacity-80 transition-colors text-sm"
              >
                –û—Ç–∫—Ä—ã—Ç—å
              </router-link>
            </div>
            
            <div class="flex items-center justify-between p-3 bg-trading-bg border border-trading-border rounded">
              <div>
                <div class="font-semibold">–¢—Ä–µ–π–¥–µ—Ä—ã</div>
                <div class="text-sm text-gray-400">–ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
              </div>
              <router-link 
                to="/traders" 
                class="px-3 py-1 bg-trading-green text-black rounded hover:bg-opacity-80 transition-colors text-sm"
              >
                –û—Ç–∫—Ä—ã—Ç—å
              </router-link>
            </div>
          </div>
        </div>

        <!-- –°–∏—Å—Ç–µ–º–∞ -->
        <div class="bg-trading-card rounded-lg border border-trading-border p-6">
          <h3 class="text-xl font-semibold mb-4">‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞</h3>
          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span class="text-gray-400">–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</span>
              <span class="text-trading-green">üü¢ –ê–∫—Ç–∏–≤–Ω–∞</span>
            </div>
            
            <div class="flex justify-between items-center">
              <span class="text-gray-400">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</span>
              <span class="text-trading-green">üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞</span>
            </div>
            
            <div class="flex justify-between items-center">
              <span class="text-gray-400">API Tinkoff</span>
              <span class="text-trading-green">üü¢ –†–∞–±–æ—Ç–∞–µ—Ç</span>
            </div>
            
            <div class="flex justify-between items-center">
              <span class="text-gray-400">–ü–∞—Ä—Å–∏–Ω–≥ —Å–∏–≥–Ω–∞–ª–æ–≤</span>
              <span class="text-trading-green">üü¢ –ê–∫—Ç–∏–≤–µ–Ω</span>
            </div>
          </div>
        </div>
      </div>

      <!-- –§—É—Ç–µ—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
      <div class="mt-12 text-center text-gray-500 text-sm">
        <p>Trader Tracker v2.0 - –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤</p>
        <p class="mt-1">–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π</p>
      </div>
    </div>
  </div>
</template>

<script setup>
// –õ–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
</script>

<style scoped>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
.transition-transform {
  transition: transform 0.2s ease-in-out;
}
</style>

================================================================================
File: frontend/src/components/AppNavigation.vue
================================================================================
<!-- frontend/src/components/AppNavigation.vue - –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø -->
<template>
  <nav class="bg-trading-card border-b border-trading-border">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <router-link to="/" class="flex items-center gap-2 text-xl font-bold text-white hover:text-trading-green transition-colors">
            üìä Trader Tracker
          </router-link>
        </div>

        <div class="hidden md:flex items-center space-x-6">
          <router-link 
            to="/" 
            :class="$route.name === 'Dashboard' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üè† –î–∞—à–±–æ—Ä–¥
          </router-link>

          <router-link 
            to="/data-management" 
            :class="$route.name === 'DataManagement' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
          </router-link>

          <router-link 
            to="/signals" 
            :class="$route.name === 'AllSignals' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üéØ –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã
          </router-link>
          
          <router-link 
            to="/consensus" 
            :class="$route.name === 'Consensus' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="px-3 py-2 rounded-md text-sm font-medium transition-colors"
          >
            üî• –ö–æ–Ω—Å–µ–Ω—Å—É—Å
          </router-link>

          <router-link 
            to="/signals-chart" 
            :class="$route.name === 'SignalsChart' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üìà –ì—Ä–∞—Ñ–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
          </router-link>
          
          <router-link 
            to="/clean-chart" 
            :class="$route.name === 'CleanChart' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üìä –ß–∏—Å—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫
          </router-link>
          
          <router-link 
            to="/traders" 
            :class="$route.name === 'TraderProfile' || $route.name === 'TradersOverview' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üë• –¢—Ä–µ–π–¥–µ—Ä—ã
          </router-link>
          
          <router-link 
            to="/patterns" 
            :class="$route.name === 'PatternsManager' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üéØ –ü–∞—Ç—Ç–µ—Ä–Ω—ã
          </router-link>

          <router-link 
            to="/diagnostics" 
            :class="$route.name === 'DataDiagnostics' ? 'text-trading-green' : 'text-gray-300 hover:text-white'"
            class="transition-colors"
          >
            üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
          </router-link>
        </div>

        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
        <div class="md:hidden">
          <button 
            @click="isMobileMenuOpen = !isMobileMenuOpen"
            class="text-gray-300 hover:text-white focus:outline-none focus:text-white transition-colors"
          >
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
      </div>

      <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
      <div v-if="isMobileMenuOpen" class="md:hidden">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t border-trading-border">
          <router-link 
            to="/" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'Dashboard' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üè† –î–∞—à–±–æ—Ä–¥
          </router-link>
          
          <router-link 
            to="/signals" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'AllSignals' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üéØ –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã
          </router-link>
          
          <router-link 
            to="/signals-chart" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'SignalsChart' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üìà –ì—Ä–∞—Ñ–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
          </router-link>

          <router-link 
            to="/clean-chart" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'CleanChart' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üìä –ß–∏—Å—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫
          </router-link>
          
          <router-link 
            to="/traders" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'TraderProfile' || $route.name === 'TradersOverview' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üë• –¢—Ä–µ–π–¥–µ—Ä—ã
          </router-link>

          <router-link 
            to="/diagnostics" 
            @click="isMobileMenuOpen = false"
            :class="$route.name === 'DataDiagnostics' ? 'text-trading-green bg-trading-bg' : 'text-gray-300 hover:text-white hover:bg-trading-bg'"
            class="block px-3 py-2 rounded-md text-base font-medium transition-colors"
          >
            üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
          </router-link>

        </div>
      </div>
    </div>
  </nav>
</template>

<script setup>
import { ref } from 'vue'

const isMobileMenuOpen = ref(false)
</script>

<style scoped>
.router-link-active {
  color: #00d4aa;
}

.transition-colors {
  transition: color 0.2s ease-in-out;
}
</style>

================================================================================
File: frontend/src/components/DataManagement.vue
================================================================================
<!-- frontend/src/components/DataManagement.vue -->
<template>
  <div class="data-management bg-trading-card rounded-lg border border-trading-border p-6">
    <h2 class="text-2xl font-bold mb-6">üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h2>
    
    <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
      <div class="bg-trading-bg rounded-lg p-4 border border-trading-border">
        <h3 class="font-semibold mb-2">üìä –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</h3>
        <div class="text-2xl font-bold text-blue-400">{{ systemStats.total_instruments || 0 }}</div>
        <div class="text-sm text-gray-400">
          –° –¥–∞–Ω–Ω—ã–º–∏: {{ systemStats.instruments_with_data || 0 }}
        </div>
      </div>
      
      <div class="bg-trading-bg rounded-lg p-4 border border-trading-border">
        <h3 class="font-semibold mb-2">üïØÔ∏è –°–≤–µ—á–∏</h3>
        <div class="text-2xl font-bold text-green-400">{{ formatNumber(systemStats.total_candles) }}</div>
        <div class="text-sm text-gray-400">–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</div>
      </div>
      
      <div class="bg-trading-bg rounded-lg p-4 border border-trading-border">
        <h3 class="font-semibold mb-2">üéØ –°–∏–≥–Ω–∞–ª—ã</h3>
        <div class="text-2xl font-bold text-yellow-400">{{ systemStats.total_signals || 0 }}</div>
        <div class="text-sm text-gray-400">
          –ê–∫—Ç–∏–≤–Ω—ã—Ö: {{ systemStats.active_signals || 0 }}
        </div>
      </div>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
      <div class="space-y-4">
        <h3 class="text-lg font-semibold">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
        
        <button 

=== –ö–û–î –û–ë–†–´–í–ê–ï–¢–°–Ø. –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –í –°–õ–ï–î–£–Æ–©–ï–ú –§–ê–ô–õ–ï ===

